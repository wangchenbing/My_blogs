<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/My_blogs/xiao.png"><link rel="icon" href="/My_blogs/xiao.png" type="image/png" sizes="512x512"><link rel="icon" href="/My_blogs/xiao.png" type="image/png" sizes="192x192"><link rel="manifest" href="/My_blogs/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/My_blogs/xiao.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/My_blogs/xiao.png"><meta name="msapplication-TileColor" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>Hookså‡½æ•°ç»„ä»¶ | Mr.iceçš„å‰ç«¯</title><meta name="description" content="vuepress-theme-hope çš„åšå®¢æ¼”ç¤º">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/My_blogs/assets/style.35576110.css">
    <link rel="modulepreload" href="/My_blogs/assets/app.8225ebca.js"><link rel="modulepreload" href="/My_blogs/assets/Hookså‡½æ•°ç»„ä»¶.html.3de7f93b.js"><link rel="modulepreload" href="/My_blogs/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/My_blogs/assets/Hookså‡½æ•°ç»„ä»¶.html.b4337c1a.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/My_blogs/" class="brand"><img class="logo" src="/My_blogs/xiao.png" alt="Mr.iceçš„å‰ç«¯"><!----><span class="site-name hide-in-pad">Mr.iceçš„å‰ç«¯</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/My_blogs/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-home"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/My_blogs/zh/js/%E6%95%B0%E7%BB%84.html" class="nav-link" aria-label="å‰ç«¯"><span class="icon iconfont icon-creative"></span>å‰ç«¯<!----></a></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/dashboard/projects" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-javascript"></span><span class="title">js</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-css"></span><span class="title">css</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-react"></span><span class="title">react</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/My_blogs/zh/react/%E5%85%AC%E7%94%A8%E5%86%85%E5%AE%B9.html" class="nav-link sidebar-link sidebar-page" aria-label="å…¬ç”¨å†…å®¹"><!---->å…¬ç”¨å†…å®¹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/class%E7%B1%BB%E7%BB%84%E4%BB%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="classç±»ç»„ä»¶"><!---->classç±»ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Hookså‡½æ•°ç»„ä»¶"><!---->Hookså‡½æ•°ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼"><!---->hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usestate" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useState"><!---->useState<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useeffect" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useEffect"><!---->useEffect<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useref-createref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useRef (createRef)"><!---->useRef (createRef)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usememo-å’Œ-usecallback" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useMemoÂ å’ŒÂ useCallback"><!---->useMemoÂ å’ŒÂ useCallback<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usecontext" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useContext"><!---->useContext<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usereducer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useReducer"><!---->useReducer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usereducerä¸usecontextåŒæ—¶å·¥ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useReducerä¸useContextåŒæ—¶å·¥ä½œ"><!---->useReducerä¸useContextåŒæ—¶å·¥ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useimperativehandle-ä¸-forwardref" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="useImperativeHandle ä¸ forwardRef"><!---->useImperativeHandle ä¸ forwardRef<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E5%8A%9F%E8%83%BD%E7%BB%84%E4%BB%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="åŠŸèƒ½ç»„ä»¶"><!---->åŠŸèƒ½ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E6%BA%90%E7%A0%81%E7%BC%96%E5%86%99.html" class="nav-link sidebar-link sidebar-page" aria-label="æºç ç¼–å†™"><!---->æºç ç¼–å†™<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E7%BB%84%E4%BB%B6antd%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html" class="nav-link sidebar-link sidebar-page" aria-label="ç»„ä»¶antdæ³¨æ„äº‹é¡¹]"><!---->ç»„ä»¶antdæ³¨æ„äº‹é¡¹]<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E8%87%AA%E5%AE%9A%E4%B9%89Hooks.html" class="nav-link sidebar-link sidebar-page" aria-label="è‡ªå®šä¹‰Hooks"><!---->è‡ªå®šä¹‰Hooks<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E9%A2%9D%E5%A4%96%E7%AC%94%E8%AE%B0.html" class="nav-link sidebar-link sidebar-page" aria-label="é¢å¤–ç¬”è®°"><!---->é¢å¤–ç¬”è®°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/react/%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6.html" class="nav-link sidebar-link sidebar-page" aria-label="å°è£…ç»„ä»¶"><!---->å°è£…ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-write"></span><span class="title">é¢è¯•é¢˜</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-repair"></span><span class="title">å‰ç«¯å·¥å…·</span><span class="arrow right"></span></button><!----></section></li><li><!--[--><a href="/My_blogs/zh/npm.html" class="nav-link sidebar-link sidebar-page" aria-label="npm"><span class="icon iconfont icon-npm"></span>npm<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/git.html" class="nav-link sidebar-link sidebar-page" aria-label="git"><span class="icon iconfont icon-git"></span>git<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/%E5%AD%A6%E4%B9%A0%E4%B8%8E%E4%B9%A6%E7%B1%8D.html" class="nav-link sidebar-link sidebar-page" aria-label="å­¦ä¹ ä¸ä¹¦ç±"><span class="icon iconfont icon-editor"></span>å­¦ä¹ ä¸ä¹¦ç±<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/My_blogs/zh/%E5%90%84%E7%B1%BB%E5%AF%86%E7%A0%81.html" class="nav-link sidebar-link sidebar-page" aria-label="å„ç±»å¯†ç "><span class="icon iconfont icon-editor"></span>å„ç±»å¯†ç <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Hookså‡½æ•°ç»„ä»¶</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´7æœˆ14æ—¥</span><meta property="datePublished" content="2022-07-14T00:00:00.000Z"></span><!----><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag0 clickable" role="navigation">React</span></li></ul><meta property="keywords" content="React"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 11 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT11M"></span><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3430 å­—</span><meta property="wordCount" content="3430"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼" class="router-link-active router-link-exact-active toc-link level2">hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usestate" class="router-link-active router-link-exact-active toc-link level2">useState</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useeffect" class="router-link-active router-link-exact-active toc-link level2">useEffect</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useref-createref" class="router-link-active router-link-exact-active toc-link level2">useRef (createRef)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usememo-å’Œ-usecallback" class="router-link-active router-link-exact-active toc-link level2">useMemoÂ å’ŒÂ useCallback</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usecontext" class="router-link-active router-link-exact-active toc-link level2">useContext</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usereducer" class="router-link-active router-link-exact-active toc-link level2">useReducer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#usereducerä¸usecontextåŒæ—¶å·¥ä½œ" class="router-link-active router-link-exact-active toc-link level2">useReducerä¸useContextåŒæ—¶å·¥ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/My_blogs/zh/react/Hooks%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.html#useimperativehandle-ä¸-forwardref" class="router-link-active router-link-exact-active toc-link level2">useImperativeHandle ä¸ forwardRef</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼" tabindex="-1"><a class="header-anchor" href="#hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼" aria-hidden="true">#</a> hooksä¸­çˆ¶å­ç»„ä»¶çš„ä¼ å€¼</h2><p>çˆ¶ä¼ å­</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//çˆ¶ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setdata<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">addclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setdata</span><span class="token punctuation">(</span>data <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å­ä¼ çˆ¶</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>addclick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">çˆ¶æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      &lt;List data = </span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token plain-text"> &gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//å­ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">List</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//çˆ¶ä¼ å­çš„æ•°æ®</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">çˆ¶ä¼ å­</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å­ä¼ çˆ¶:</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//çˆ¶ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setnum<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//å…ˆå®šä¹‰ä¸€ä¸ªæš‚å­˜æ•°æ®</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å­ä¼ çˆ¶</span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      &lt;List setshowregisterdata= </span><span class="token punctuation">{</span> setnum <span class="token punctuation">}</span><span class="token plain-text">&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//å­ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">List</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> setshowregisterdata<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span><span class="token comment">//è‡ªå®šä¹‰æ–¹æ³•</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setnum<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">childadd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setnum</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token function">setshowregisterdata</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">childadd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å­æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usestate" tabindex="-1"><a class="header-anchor" href="#usestate" aria-hidden="true">#</a> useState</h2><ul><li>State Hookè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€, å¹¶è¿›è¡ŒçŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ</li><li>è¯­æ³•: const [xxx, setXxx] = React.useState(initValue)</li><li>useState()è¯´æ˜: Â  Â  Â  å‚æ•°: ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æŒ‡å®šçš„å€¼åœ¨å†…éƒ¨ä½œç¼“å­˜ Â  Â  Â  è¿”å›å€¼: åŒ…å«2ä¸ªå…ƒç´ çš„æ•°ç»„, ç¬¬1ä¸ªä¸ºå†…éƒ¨å½“å‰çŠ¶æ€å€¼, ç¬¬2ä¸ªä¸ºæ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°</li><li>setXxx()2ç§å†™æ³•: Â  Â  Â  setXxx(newValue): å‚æ•°ä¸ºéå‡½æ•°å€¼, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼ Â  Â  Â  setXxx(value =&gt; newValue): å‚æ•°ä¸ºå‡½æ•°, æ¥æ”¶åŸæœ¬çš„çŠ¶æ€å€¼, è¿”å›æ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼</li><li>æ›´æ”¹æ•°ç»„çš„å†™æ³• tabledata[1].state=! tabledata[1].state console.log(tabledata) settabledata([...tabledata])</li></ul><p>è‹¥è¦è·å–æœ€æ–°å€¼å¯ä»¥ä½¿ç”¨useEffect()ç›‘å¬çŠ¶æ€</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//React.useState()</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setdata<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">add</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setdata</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–çŠ¶æ€ä¸Šä¸€æ¬¡çš„å€¼</span>
  <span class="token punctuation">}</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–çŠ¶æ€æœ€æ–°å€¼</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰çŠ¶æ€:</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="useeffect" tabindex="-1"><a class="header-anchor" href="#useeffect" aria-hidden="true">#</a> useEffect</h2><ul><li>Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­)</li><li>Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ: Â  Â  Â  å‘ajaxè¯·æ±‚æ•°æ®è·å– Â  Â  Â  è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨ Â  Â  Â  æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM</li><li>è¯­æ³•å’Œè¯´æ˜:</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code>   <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ</span>
       <span class="token comment">// åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>stateValue<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// å¦‚æœæŒ‡å®šçš„æ˜¯[], å›è°ƒå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡render()åæ‰§è¡Œ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯ä»¥æŠŠ useEffect Hook çœ‹åšå¦‚ä¸‹ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ</li></ul><p>- componentDidMount()</p><p>- componentDidUpdate()</p><p>- componentWillUnmount()</p><ul><li>Effectä¸­çš„ç¬¬äºŒä¸ªå‚æ•°åªèƒ½ç›‘å¬å…·æœ‰å˜æ›´æ•ˆç›Šçš„çŠ¶æ€</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token comment">//React.useEffect()çš„ç¬¬äºŒä¸ªå‚æ•°è‹¥ä¸å†™,ä¼šç›‘å¬æ‰€æœ‰çš„çŠ¶æ€,ç›¸å½“äºcomponentDidMount()ä¸render()</span>
		<span class="token comment">//è‹¥ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„,ä¸ä¼šç›‘å¬æ‰€æœ‰å¯¹è±¡,ç›¸å½“äºcomponentDidMount()</span>
		<span class="token comment">//è‹¥æŠŠä¸€ä¸ªçŠ¶æ€ä¼ å…¥ä¸€ä¸ªæ•°ç»„,é‚£ä¼šç›‘å¬æ”¹çŠ¶æ€çš„å˜æ›´,ä»è€Œåšå‡ºå›è°ƒç›¸å½“äºvueä¸­çš„watch()</span>
		<span class="token comment">//è‹¥è¿”å›ä¸€ä¸ªå‡½æ•°,è¿”å›å‡½æ•°ä½“å†…ç›¸å½“äºreactä¸­çš„componentWillUnmount()ç»„ä»¶å¸è½½  </span>
 React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> time<span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token operator">=&gt;</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰æ±‚å’Œ:</span><span class="token punctuation">{</span> count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> +1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>del<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> å¸è½½</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>useEffectä¸èƒ½ç›‘å¬ä¸å…·æœ‰æ›´æ–°æ–¹æ³•çš„çŠ¶æ€</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">const</span> <span class="token function-variable function">numset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    num <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token comment">//ä¸ä¼šè§¦å‘ç»„ä»¶è°ƒç”¨</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//åªèƒ½ç›‘å¬å…·æœ‰æ›´æ”¹æ–¹æ³•çš„çŠ¶æ€</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>divbox2<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>link<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>numset<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ›´æ”¹num</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="useref-createref" tabindex="-1"><a class="header-anchor" href="#useref-createref" aria-hidden="true">#</a> useRef (createRef)</h2><p>useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚ è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜</p><ul><li>Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®</li><li>è¯­æ³•: const refContainer = useRef()</li><li>ä½œç”¨:ä¿å­˜æ ‡ç­¾å¯¹è±¡,åŠŸèƒ½ä¸React.createRef()ä¸€æ ·</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> useref <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>useref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//inputè¾“å…¥å€¼</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>useref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>show<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å±•ç¤º</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>useRefä¸createRefçš„åŒºåˆ«</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//ä¾‹1</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> createRef<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inputRef<span class="token punctuation">)</span><span class="token comment">//null</span>

  <span class="token keyword">const</span> useInputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>useInputRef<span class="token punctuation">)</span><span class="token comment">//{current: 2}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">btninputRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//è¾“å…¥æ¡†å½“å‰å€¼</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">btnuseInputRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>useInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token comment">//è¾“å…¥æ¡†å½“å‰å€¼</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* null */</span><span class="token punctuation">}</span><span class="token plain-text">
      value: </span><span class="token punctuation">{</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btninputRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">è·å–ç„¦ç‚¹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* useRefåˆå§‹å€¼ */</span><span class="token punctuation">}</span><span class="token plain-text">
      value: </span><span class="token punctuation">{</span>useInputRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>useInputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btnuseInputRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">è·å–ç„¦ç‚¹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//ä¾‹2</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> createRef<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> setNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> uRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> cRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">btnClk</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNum</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//ä½¿useStateçš„å€¼åŠ 1</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    uRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value <span class="token operator">=</span> num<span class="token comment">//èµ‹å€¼çŠ¶æ€</span>
    cRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value <span class="token operator">=</span> num<span class="token comment">//èµ‹å€¼çŠ¶æ€</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;in effect&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ç›‘å¬numå˜åŒ–</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uRef<span class="token punctuation">.</span>current<span class="token operator">?.</span>value<span class="token punctuation">)</span><span class="token comment">//è¿‡å»çš„çŠ¶æ€å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cRef<span class="token punctuation">.</span>current<span class="token operator">?.</span>value<span class="token punctuation">)</span><span class="token comment">//undefined</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>App<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>uRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>cRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>btnClk<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šæ‰§è¡ŒuseRefå’ŒcreateRef,é‡æ–°æ‰§è¡ŒuseRef()è¿”å›çš„å¯¹è±¡æ˜¯æ—§çš„ï¼Œè€Œé‡æ–°æ‰§è¡ŒcreateRef()è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“:</p><p>1.createRefæ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„refå¯¹è±¡</p><p>2.useRefç¬¬ä¸€æ¬¡æ¸²æŸ“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¹‹å,å†é‡æ–°æ¸²æŸ“çš„æ—¶å€™,å¦‚æœå‘ç°è¿™ä¸ªå¯¹è±¡å·²ç»åˆ›å»ºè¿‡å°±ä¸ä¼šå†åˆ›å»ºç¬¬äºŒæ¬¡ï¼Œæ€§èƒ½ä¼šå¥½ä¸€äº›</p><p>3.å°½é‡åœ¨classç»„ä»¶ä¸­ä½¿ç”¨createRefï¼Œåœ¨hooksä¸­ä½¿ç”¨useRef</p><h2 id="usememo-å’Œ-usecallback" tabindex="-1"><a class="header-anchor" href="#usememo-å’Œ-usecallback" aria-hidden="true">#</a> useMemoÂ å’ŒÂ useCallback</h2><ul><li>ä¸¤è€…åŒºåˆ« useMemoÂ å’ŒÂ useCallbackÂ æ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·,ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒ ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦ä¾èµ–çš„æ•°æ®</li></ul><p>å…±åŒä½œç”¨ï¼š</p><p>1.ä»…ä»…Â ä¾èµ–æ•°æ®Â å‘ç”Ÿå˜åŒ–, æ‰ä¼šé‡æ–°è®¡ç®—ç»“æœï¼Œä¹Ÿå°±æ˜¯èµ·åˆ°ç¼“å­˜çš„ä½œç”¨ã€‚</p><p>ä¸¤è€…åŒºåˆ«ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  1.useMemo è®¡ç®—ç»“æœæ˜¯ return å›æ¥çš„å€¼, ä¸»è¦ç”¨äº ç¼“å­˜è®¡ç®—ç»“æœçš„å€¼ ï¼Œåº”ç”¨åœºæ™¯å¦‚:éœ€è¦ è®¡ç®—çš„çŠ¶æ€

  2.useCallback è®¡ç®—ç»“æœæ˜¯ å‡½æ•°, ä¸»è¦ç”¨äº ç¼“å­˜å‡½æ•°ï¼Œåº”ç”¨åœºæ™¯å¦‚: éœ€è¦ç¼“å­˜çš„å‡½æ•°ï¼Œ
    å› ä¸ºå‡½æ•°å¼ç»„ä»¶æ¯æ¬¡ä»»ä½•ä¸€ä¸ª state çš„å˜åŒ–æ•´ä¸ªç»„ä»¶éƒ½ä¼šè¢«é‡æ–°åˆ·æ–°ï¼Œä¸€äº›å‡½æ•°æ˜¯æ²¡æœ‰å¿…è¦è¢«é‡æ–°åˆ·æ–°çš„ï¼Œ
    æ­¤æ—¶å°±åº”è¯¥ç¼“å­˜èµ·æ¥ï¼Œæé«˜æ€§èƒ½ï¼Œå’Œå‡å°‘èµ„æºæµªè´¹ã€‚

  æ³¨æ„ï¼š ä¸è¦æ»¥ç”¨ä¼šé€ æˆæ€§èƒ½æµªè´¹ï¼Œreactä¸­å‡å°‘renderå°±èƒ½æé«˜æ€§èƒ½ï¼Œæ‰€ä»¥è¿™ä¸ªä»…ä»…åªé’ˆå¯¹ç¼“å­˜èƒ½å‡å°‘é‡å¤æ¸²æŸ“æ—¶ä½¿ç”¨å’Œç¼“å­˜è®¡ç®—ç»“æœã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>usememo</li></ul><p>é¿å…è°ƒç”¨å…¶ä»–å­ç»„ä»¶çš„æŒ‚åœ¨æ—¶çš„render</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">,</span> setNameA<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">,</span> setNameB<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">,</span> setNameC<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">)</span>

  <span class="token comment">/* ä¸ä½¿ç”¨useCallback */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">changeNameFunA</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameA</span><span class="token punctuation">(</span><span class="token string">&quot;AAAA&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">changeNameFunB</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameB</span><span class="token punctuation">(</span><span class="token string">&quot;BBBB&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">changeNameFunC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameC</span><span class="token punctuation">(</span><span class="token string">&quot;CCCC&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> comA <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameA<span class="token punctuation">}</span></span> <span class="token attr-name">FunA</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunA<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> comB <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">B</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameB<span class="token punctuation">}</span></span> <span class="token attr-name">FunB</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunB<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> comC <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">C</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameC<span class="token punctuation">}</span></span> <span class="token attr-name">FunC</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunC<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comA<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comB<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comC<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;A name={nameA} FunA={changeNameFunA}&gt;&lt;/A&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;B name={nameB} FunB={changeNameFunB}&gt;&lt;/B&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;C name={nameC} FunC={changeNameFunC}&gt;&lt;/C&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Aç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunA<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Aç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Aç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunA<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜A</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Bç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunB<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Bç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Bç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunB<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Cç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunC<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Cç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunC<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Cç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunC<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜C</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹çŠ¶æ€</p><p><img src="/My_blogs/assets/memoUntitled.6bdbcae8.png" alt="Untitled" loading="lazy"></p><p>ä½¿ç”¨usememoåç‚¹å‡»æ”¹å˜,è°ƒç”¨æ”¹çŠ¶æ€æ‰€åœ¨çš„ç»„ä»¶render</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV4AAABiCAYAAAAY5Lt4AAAOTklEQVR4Ae2dQaocyRGGdRQJZGwPtvHCYNDCOy8MNnhhvPLah5hZzM53sBYza++FQDcYBDqBEGgpBHOGNtHdf9df0ZFV1Y+qfK+7v0UTkZERkdWRf/6VXU+qfPbrb36740MNwAAYAAP9MPDsL3/9+44PNQADYAAM9MPAs+cvXu74UAMwAAbAQD8MQLzceLjxggEw0BkDEG/ngrOr6LeroNbU+qliAOKFeNntgAEw0BkDEG/ngj/VOzDXxe4QDPTDwOrE++Xrz+Xd81J7CwRVnso2FR/++lR+U/mm+iLXVH/uy+3qWpbacq5otz5Lc+LXbyFS6/uqdTfiDWBlcsi2iigyIJVDMudw/yX5lvh7Hvnn8d0n64oJqbjsI7v7yr/yrfzd5rrndHvocx+PRb8vcmC+t5vvVYnXF3Vr0tzH9fC/pO2+rrfGrfJP+XpfK7/skh4jXX2Ssod0m+stnyV2+Xi+JXq+nqqt3FvI795+3n18+335a2mL8ci5HalQ2/narka8WtySufiyZxl+lc3tyiU/9UW7+sz155gqv3K4lF8lc061K1/ZwqfSZQvpPkvs8lGcrsPb2WdpW35bSIh3frFuUXdyPk7dVyNen0AtctlyO+yZELJN/Z5DeSS9T7rLOb/cH7GyScoWbX18jEv0nNNj1SepPo1ZSfmEVL9snmdKV1xLKt/zF9/v3nz6vHvz9sNpLN+hvn4/1Gdsb8c8/2HIFeOP46p809cwXOvjLCbGp+5LMfBoxKsLbJFC9Htf1a5yyCb/FqHILn+1s1Qel1lXO8dGO/rUX+myycdjZHMf6dkv+1bXIlsrR845bgfp/bz78v7H43f6cffT1w+71y9e7sa71YPfTz8cvveekD+9230Xdfj23e7jMWakpxztfO1r0HdCQn7XgIFNiDe+uBatZFWM3HdpWzlzXMue/XJ7Li77e9v1Vh7ZJasY9Um2fCq721xXrpBudz33nbePu81v88I+kqH9Ioi8TrzSn79okbWT91S+1jXka6Ltc47+9PCwGfGeL9zxl4/F6R/5uy10B43a2Se3FZPtVVu+U+NHnPrd3/Uqt+IU2/LJ9iV5Pbf83Sbdc+s63N/7K12+p0cNJfF+3r05sx/mO3a8lxNvKx/EO8zHeD1hv656bEa8vvCXgkIx8p9rt/xkzzLny/1qZz+1JeXnsuqrbBEje5aeT7p81Jas7G6T3pKRR32tnOP+NunFo4HhEcR4AbSId/98d/QIYnjG287XvgZ9B+S4/tTjadZjE+IdL9jzBe5gCF/5S6p/rt3yc7vyt6R8Q2q8OakY+Sm2GkO+kjmmsssW0v3n7Brf42RTHkn3UV7vO++fIr3o818wh2e/kaNJvPs/1h1jPr3bvR79c7JWvqlreJoLTLVFMj+OgdWJNy9eDZbt0a5s8g851y/f7Cd7llN+3nepnsep2pHT84ZP1a5srXzZ7rGuu5/bXW9dj8eiQx5gYB0MrEa8sYjzQs6TNOWjvkoqTyt/Za/ytGzKH1I+0nOft6UrpiXll2X4Z5varVyVXTGSVV6PC7/Kx+PlLxtynQVHHaljYGA14gVQAAoMgAEwsAwDEC9vJ2vuullEyxYRdaJOl2IA4oV4IV4wAAY6Y+DZq1evdnyoARgAA2CgHwbY8Xa+0136kwR/fsaCgdvDAMQL8fIzEwyAgc4YgHg7F5zdy+3tXphT5vRSDEC8EC+7HTAABjpjoCvxTv2j/eqOUflXtio2bPpPAJKV31S+qT7lr3JWfXO5Wnkqe84V7danisfGDg0MPC4GHo14K6LIYBDBSEa/6+6/JN8Sf88jfx/T+ytdMSEVN+enmMpPNvlIKrePoz7J7KNcLak45OMuSup/+/VfnXj3b5b6ev5aPyeBANYlbfd1fQqgS/1yjlac7JI5zr9T5eM21z3PpXbFetwS3a+1yiHbNpIX3WxT19snq1uq28rEG4vqw+71Dx9Gx7hUZOC2KOhUO/paH8W2+rNdkxd26crh0vuynnOqnf287eO53vJZYpeP8uk6vJ19lrblt76EeNevKaR7bTVdl3jjaJc4Giak3rV6JFWRggqktsvcF22RiPdJdznnl/s9t/eF7h8f4xI95/RY9Umqz8fNunxCqk82zzOlK64llW//rtz37+xVj8NrHg8vRB9qdHrJ+X7uWzGH10MO49ovov1xQMpn48R5bM1rgGhOc9X5j0KMuw72ViXeeMxwWIj1rqZFCjGZ3le1NeHZz+3DwtZCHss5Xx/Xx3FdPtVYnr/SZfMc2eZt6Xl8xXt/dT0e53qOP2vvD6EcyDHmVQdRnr9f9+h3JFARcfgpZvxic8fGcBTQ/rvEuLphT1yDvjdyHRKgjv3ruCLx+oLyM7QOX+qihV8QscCR87Ts2S+35+Kyv7ddb+WRXbKKUZ9ky6eyu8115Qrpdtdz31l7v9vUoZYOyiDK8c3si57np185A1mPcTE6QmhPrimfE+/pYE2/BnSfY/TrxMN6xDv6yXhcTMdFFIveP1robmsRQ/bJbQEv26u2fKfGjzj1u7/rVW7FKbblk+1L8npu+btNuufWdbi/91e6fA+PGlrEa48D/GfuQ4m3Ra5N8r/OhXaqrdcMffR3lnuq0WrEO+xwtDDSz8gEMpGFij3XbvnJnmXOl/vVzn5qS8rPZdVX2SJG9iw9n3T5qC1Z2d0mvSUjj/paOUf9E6TnjxCUay+bxHt4vjt67KBd8v7U4eGRxijfxDWM/BKu6NP6Qz5lLKxEvPFz0k+TPUz6+HngYfFrgUuqOHPtlp/bI8fUR74hNd6cVIz8FFuNI1/JHFPZZQvp/nN2je9xsimPpPsor/ed9U+SXnrcoEcDE8S7/2PrcW4+vv1x9+aTkW2MZfMmgm7vuiEUzSHyerGwEvFOF0ALy4EyufAvJCHPKz3nlz2k912qe56WHjk9bx5T7Tkf5c9+ip/qn/PJOXNbuZHT2KY+1OchGOhCvPnCYpG3PvJtEUFlb+Wq7MofUv3Sc5+3pSumJeWXZfhnm9qtXJVdMZJVXo8Lv8rH4+UvGxIyAQPbYuBRiJdJ3XZSqS/1BQNPGwMQL3+cae7EWbxPe/EyP9c7PxAvxAvxggEw0BkDEG/ngrNLud5dCnPH3K2FAQ675LBPDjsFA2CgMwbY8bLj5WcmGAADnTEA8XYu+Fo/VcjDz14wcL0YgHghXnY7YAAMdMYAxNu54OxSrneXwtwxd2thYDXizf87Sv8bqpJrXXzOk68h9+d25V/ZFFf1VTb5I1moYAAMVBhYjXgjuZOQ6z6w20Of+3jsnD6XO8fLXzL6XXf/S+0ei87iAwNgwDGwKvF6YieqJXrEul/VDtv+NIPTawWHyZyLner3Ptf1fcKWP60+2beT+cXiQw22G5MxqC0YWBMDmxOvE1ZcuBOb67mvah9OL3icwzS96LpuSfXltuzrSoh33XpCKNSzPwZWI94gHSeepbriWnIEinjn6yMcpunfJa5H1zq6Nr+p7N9n2zr48fDuYuXQGWX7d9ZOHO4Y7zZWzOm4nfjDYNTktCO30yEmr6E/0HKtaDMH94yB1Yg3iugENZCEE0abnHN81Y7HDI9xmKZ/r3xd3nfS9y/3Hl727adzjF8OHy8V57DIqCkfanBPGNiUeKtCnsgpEXX4et95e/wT28ns3Hcu13m/rjVfg3KH3T/yV7/L9ukJ6fSGfU4jXp3mcHyWfTiNYfy9OSwSgnLsoV8nHjYn3kxWTmze19JPwBr9pD6SYKfDNP2aRwR73KmpX3KaeO1xgO/0mkfnzBAvh0WyW3YcoV8FHroQr5PViZxmd7jjXWne4T7fH5TYILELc5/IvYjza5effwfZRn7756vVKb3jgx89dv+sttzxjmOiDsMzXntUkRfcxDWMxs1xtK9i4TKH17nT1bytTrwiJZehe1uDyzbfPvxB6vSHqCM5jJ+XHohaOSXnc48nMMdFfLbl9tkYk6SXHjeIbJs73vEf0Dgscjxfqj2SulwTBlYnXn35WXJaQGitHBpDMvyy76VtzyVdUvldqs9lHtP70CEGMAAGhIFViVdJKwLKpFX5eLz8ZbtEKraSytMav7JnW9XONo2DZLGBATCQMbAJ8eZBaAM8MAAGwMCAAYiXPybxxyQwAAY6Y4Cjfzof+fGK8ThmBgzcPQbY8Xa+0/Fza/i5RS2oxb1iAOKFePmZCQbAQGcMQLydC36vd3i+N7tbMDBgAOKFeNntgAEw0BkDEG/ngnPXH+761IJa3CsGIF6Il90OGAADnTFwRry/+OM/dy9+9QcmovNE3Oudn+/NrvceMXBGvL/5x3938Xn5+z9DvpAvGAADYGADDJwRb+x2Rb6//NO/KfoGRb/HOzzfmZ0tGBgwcEa8URzIdygQYKEWYAAMrI2BJvF+87f/7H73r//xyIEdL796wAAYWBkDZ8Qbu11Ilzv82nd48oEpMDBg4Ix4Y5fLTncoEGChFmAADKyNgTPijT+o8S8aANraQCMfmAIDAwbOiJfiDMWhFtQCDICBLTAA8a780HyLSSInix8M3BYGIF6Il79YgwEw0BkDEG/ngrNzua2dC/PJfD4EAxAvxMtuBwyAgc4YgHg7F/whd0di2FWBgdvCAMQL8bLbAQNgoDMGIN7OBWfncls7F+aT+XwIBiBeiJfdDhgAA50xAPF2LvhD7o7EsKsCA7eFAYgX4mW3AwbAQGcMQLydC87O5bZ2Lswn8/kQDEC8EC+7HTAABjpjAOLtXPCH3B2JYVcFBm4LAxAvxMtuBwyAgc4YgHg7F5ydy23tXJhP5vMhGIB4IV52O2AADHTGAMTbueAPuTsSw64KDNwWBiBeiJfdDhgAA50xAPF2Ljg7l9vauTCfzOdDMADxQrzsdsAAGOiMgf8DViMS2geN3ZkAAAAASUVORK5CYII=" alt="Untitled" loading="lazy"></p><p>ä¸ä½¿ç”¨usememoåç‚¹å‡»æ”¹å˜,è°ƒç”¨æ‰€æœ‰ä¸çˆ¶ç»„ä»¶æœ‰å…³çš„ç»„ä»¶çš„render</p><p><img src="/My_blogs/assets/memoUntitled3.647ed1f8.png" alt="Untitled" loading="lazy"></p><ul><li>uescallback</li></ul><p>é¿å…å…¶ä»–å­ç»„ä»¶ä¸å¿…è¦çš„æ›´æ–°æ—¶renderè°ƒç”¨</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">,</span> setNameA<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">,</span> setNameB<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">,</span> setNameC<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">/* ä½¿ç”¨useCallback ==============*/</span>
  <span class="token keyword">const</span> changeNameFunA <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameA</span><span class="token punctuation">(</span><span class="token string">&quot;AAAA&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> changeNameFunB <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameB</span><span class="token punctuation">(</span><span class="token string">&quot;BBBB&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> changeNameFunC <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameC</span><span class="token punctuation">(</span><span class="token string">&quot;CCCC&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">/* ä¸ä½¿ç”¨useCallback =============*/</span>
  <span class="token comment">// const changeNameFunA = () =&gt; {</span>
  <span class="token comment">//   setNameA(&quot;AAAA&quot;)</span>
  <span class="token comment">// }</span>
  <span class="token comment">// const changeNameFunB = () =&gt; {</span>
  <span class="token comment">//   setNameB(&quot;BBBB&quot;)</span>
  <span class="token comment">// }</span>
  <span class="token comment">// const changeNameFunC = () =&gt; {</span>
  <span class="token comment">//   setNameC(&quot;CCCC&quot;)</span>
  <span class="token comment">// }</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameA<span class="token punctuation">}</span></span> <span class="token attr-name">FunA</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunA<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">A</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">B</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameB<span class="token punctuation">}</span></span> <span class="token attr-name">FunB</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunB<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">B</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">C</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameC<span class="token punctuation">}</span></span> <span class="token attr-name">FunC</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunC<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">C</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Aç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunA<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Aç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Aç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunA<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜A</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Bç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunB<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Bç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Bç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunB<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Cç»„ä»¶é‡æ–°æ¸²æŸ“ä¸”è°ƒç”¨render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunC<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Cç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FunC<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Cç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunC<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜C</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹çŠ¶æ€</p><p><img src="/My_blogs/assets/callbackUntitled.168b7a48.png" alt="Untitled" loading="lazy"></p><p>ä¸ä½¿ç”¨çš„æƒ…å†µä¸‹æ¯æ¬¡ç‚¹å‡»æ”¹å˜ä¼šæ‰§è¡Œæ‰€æœ‰å­ç»„ä»¶çš„æ›´æ–°æ—¶çš„render</p><p><img src="/My_blogs/assets/callbackUntitled2.5149f776.png" alt="Untitled" loading="lazy"></p><p>ä½¿ç”¨çš„æƒ…å†µä¸‹æ¯æ¬¡ç‚¹å‡»åªä¼šæ‰§è¡Œéœ€è¦æ”¹å˜çŠ¶æ€çš„ç»„ä»¶render,å­ç»„ä»¶ç›‘å¬è¯¥å‡½æ•°</p><p><img src="/My_blogs/assets/callbackUntitled3.41e9c358.png" alt="Untitled" loading="lazy"></p><ul><li>usememoä¸uescallbackåŒæ—¶ä½¿ç”¨</li></ul><p>åŸå§‹ä»£ç ï¼šçˆ¶ç»„ä»¶ï¼Œä¸‰ä¸ªå­ç»„ä»¶ï¼Œä¸”å­ç»„ä»¶æ˜¯å…„å¼Ÿå…³ç³»</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">,</span> setNameA<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">,</span> setNameB<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">,</span> setNameC<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">)</span>

	<span class="token comment">//æœªä½¿ç”¨useCallback  </span>
  <span class="token comment">// const changeNameFunA =() =&gt; {</span>
  <span class="token comment">//   setNameA(&quot;AAAA&quot;)</span>
  <span class="token comment">// }</span>
  <span class="token comment">// const changeNameFunB = () =&gt; {</span>
  <span class="token comment">//   setNameB(&quot;BBBB&quot;)</span>
  <span class="token comment">// }</span>
  <span class="token comment">// const changeNameFunC = () =&gt; {</span>
  <span class="token comment">//   setNameC(&quot;CCCC&quot;)</span>
  <span class="token comment">// }</span>

	<span class="token comment">//ä½¿ç”¨useCallback</span>
  <span class="token comment">// useCallback:å½“å­ç»„ä»¶æ›´æ–°æ—¶ï¼Œé¿å…æ‰§è¡Œéå¿…è¦çš„ï¼Œå‡å°‘renderè°ƒç”¨</span>
  <span class="token keyword">const</span> changeNameFunA <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameA</span><span class="token punctuation">(</span><span class="token string">&quot;AAAA&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> changeNameFunB <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameB</span><span class="token punctuation">(</span><span class="token string">&quot;BBBB&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> changeNameFunC <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNameC</span><span class="token punctuation">(</span><span class="token string">&quot;CCCC&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// useMemo:å½“æŸä¸ªå­ç»„ä»¶æ›´æ–°æ—¶ï¼Œé¿å…è°ƒç”¨å…¶ä»–å­ç»„ä»¶çš„render</span>
  <span class="token keyword">const</span> comA <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameA<span class="token punctuation">}</span></span> <span class="token attr-name">FunA</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunA<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> comB <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">B</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameB<span class="token punctuation">}</span></span> <span class="token attr-name">FunB</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunB<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> comC <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">C</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>nameC<span class="token punctuation">}</span></span> <span class="token attr-name">FunC</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>changeNameFunC<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>nameC<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">//æ›´æ”¹ç»„ä»¶</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comA<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comB<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>comC<span class="token punctuation">}</span><span class="token plain-text"> 
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;A name={nameA} FunA={changeNameFunA}&gt;&lt;/A&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;B name={nameB} FunB={changeNameFunB}&gt;&lt;/B&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* &lt;C name={nameC} FunC={changeNameFunC}&gt;&lt;/C&gt; */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Aç»„ä»¶é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunA<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Aç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>FunA<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Aç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunA<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜A</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Bç»„ä»¶é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunB<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Bç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>FunB<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Bç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunB<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜B</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Cç»„ä»¶é‡æ–°æ¸²æŸ“&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> FunC<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨Cç»„ä»¶çš„render&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>FunC<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Cç»„ä»¶ï¼š</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>FunC<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜C</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- ## useContext ä¸ useReducer --><h2 id="usecontext" tabindex="-1"><a class="header-anchor" href="#usecontext" aria-hidden="true">#</a> useContext</h2><p>ç”¨äºè§£å†³å¤šä¸ªå­ç»„ä»¶ä¼ å€¼</p><p>åˆ›å»ºä¸€ä¸ªContext.jsæ–‡ä»¶,å½“ä½œè½½ä½“</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">const</span> CountContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> CountContext <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨App.jsä¸­å¼•å…¥Context.js</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>CountContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./Context&#39;</span><span class="token comment">//æ•°æ®ä¼ é€’è½½ä½“</span>
<span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&#39;./component/List&#39;</span><span class="token comment">//å­ç»„ä»¶</span>
<span class="token keyword">import</span> Table <span class="token keyword">from</span> <span class="token string">&#39;./component/Table&#39;</span><span class="token comment">//å­ç»„ä»¶</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setnum<span class="token punctuation">]</span> <span class="token operator">=</span>React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setnum</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CountContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span> <span class="token punctuation">{</span>count<span class="token punctuation">,</span> setnum<span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Table</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Table</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CountContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token punctuation">{</span><span class="token comment">/* CountContext.Providerä¼ é€’å‚æ•°,Provider æ¥æ”¶ä¸€ä¸ª value å±æ€§,valueå¡«å…¥æ‰€éœ€è¦ä¼ é€’çš„æ–¹æ³•æˆ–å€¼,åœ¨è¯¥æ ‡ç­¾å†…,æ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥è·å¾—valueæ‰€ä¼ é€’çš„æ–¹æ³•æˆ–å€¼,ä¸”å†…éƒ¨çš„ç»„ä»¶éƒ½ä¼šå‘—é‡æ–°æ¸²æŸ“ */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å­ç»„ä»¶List</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CountContext<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../Context&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>count<span class="token punctuation">,</span>setnum<span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>CountContext<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’çš„è½½ä½“å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token comment">//ä¸çˆ¶ç»„ä»¶çš„countå€¼ä¸€æ ·</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token function">setnum</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		  </span><span class="token punctuation">{</span><span class="token comment">/* ä¹Ÿå¯ä»¥ä½¿ç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³• */</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸propsåšå¯¹æ¯”:contextæ‰€ä¼ é€’çš„ç»„ä»¶æ›´å¤š,ä½¿ç”¨ context, æˆ‘ä»¬å¯ä»¥é¿å…é€šè¿‡ä¸­é—´å…ƒç´ ä¼ é€’ propsï¼š</p><h2 id="usereducer" tabindex="-1"><a class="header-anchor" href="#usereducer" aria-hidden="true">#</a> useReducer</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//[useState](https://react.docschina.org/docs/hooks-reference.html#usestate)çš„æ›¿ä»£æ–¹æ¡ˆ,å¸¸ç”¨äºä¸useContexté…åˆå·¥ä½œ</span>
<span class="token comment">//state:å¤–éƒ¨å½“å‰å€¼</span>
<span class="token comment">//disppatch:æ ‡è®°åŠ¨ä½œç±»å‹å’ŒåŒ…å«æ‰€éœ€è¦æ›´æ”¹çš„å€¼(type/value)</span>
<span class="token comment">//reducer:å¤–éƒ¨æ“ä½œåŠ¨ä½œ</span>
<span class="token comment">//initialState:å¤–éƒ¨å¯¹è±¡,å®šä¹‰å¤–éƒ¨å€¼çš„çŠ¶æ€</span>
<span class="token comment">//è¯­æ³•æ ¼å¼</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//å¤–éƒ¨å¼•ç”¨çš„æ–¹æ³•====</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">oldstate<span class="token punctuation">,</span> typedata</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">//ä¸èƒ½ç›´æ¥ä¿®æ”¹å¤–éƒ¨çŠ¶æ€çš„å€¼,éœ€è¦è¿›è¡Œå¤åˆ¶</span>
  <span class="token keyword">const</span> newdata <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>oldstate <span class="token punctuation">}</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>typedata<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;minus&#39;</span><span class="token operator">:</span>
      newdata<span class="token punctuation">.</span>count<span class="token operator">--</span>
      <span class="token keyword">return</span> newdata
    <span class="token keyword">case</span> <span class="token string">&#39;add&#39;</span><span class="token operator">:</span>
      newdata<span class="token punctuation">.</span>count<span class="token operator">++</span>
      <span class="token keyword">return</span> newdata
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> oldstate
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å¤–éƒ¨å¼•ç”¨çš„æ–¹æ³•====</span>
<span class="token comment">//å¤–éƒ¨å¼•ç”¨çš„çŠ¶æ€====</span>
<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token comment">//å¤–éƒ¨å¼•ç”¨çš„çŠ¶æ€====</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//å°†å¤–éƒ¨çŠ¶æ€ä¸æ–¹æ³•å†…ç½®åŒ–</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token comment">//å®šä¹‰åŠ¨ä½œæ ‡è®°å’Œæºå¸¦çš„çŠ¶æ€,typeä¸ºå¿…é¡»</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;minus&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">&#39;111&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* æ˜¾ç¤ºå½“å‰å¤–éƒ¨çš„å€¼ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token string">&#39;222&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usereducerä¸usecontextåŒæ—¶å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#usereducerä¸usecontextåŒæ—¶å·¥ä½œ" aria-hidden="true">#</a> useReducerä¸useContextåŒæ—¶å·¥ä½œ</h2><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">/*
  æ¨¡æ‹Ÿåœºæ™¯,APPç»„ä»¶ä¸­æœ‰3ä¸ªå­ç»„ä»¶,ABC,å…¶ä¸­Aæ§åˆ¶Bå’ŒCçš„çŠ¶æ€,ABCå‡ä¸ºå…„å¼Ÿç»„ä»¶
	é™„åŠ :(æ­¤å†™æ³•æœ‰æ€§èƒ½æµªè´¹,å¯ä½¿ç”¨useMemoè¿›è¡Œæ€§èƒ½ä¼˜åŒ–)!!!
*/</span>
<span class="token comment">//å®šä¹‰å¤–éƒ¨å‡½æ•°æ–¹æ³•</span>
<span class="token keyword">const</span> <span class="token function-variable function">redecer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pervState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newadata <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>pervState <span class="token punctuation">}</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;child2add&#39;</span><span class="token operator">:</span>
      newadata<span class="token punctuation">.</span>count1<span class="token operator">++</span>
      <span class="token keyword">return</span> newadata
    <span class="token keyword">case</span> <span class="token string">&#39;child3add&#39;</span><span class="token operator">:</span>
      newadata<span class="token punctuation">.</span>count2<span class="token operator">++</span>
      <span class="token keyword">return</span> newadata
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> pervState
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å®šä¹‰å¤–éƒ¨çŠ¶æ€</span>
<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count1</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">count2</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token operator">**</span><span class="token keyword">const</span> Contextstate <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">**</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//è·å–å¤–éƒ¨çŠ¶æ€ä¸æ–¹æ³•</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> action<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useReducer</span><span class="token punctuation">(</span>redecer<span class="token punctuation">,</span> initState<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// é€šè¿‡Contextstate.Providerå‘æ‰€æœ‰å­ç»„ä»¶è½¬é€’å¤–éƒ¨å®šä¹‰çš„æ–¹æ³•å’ŒçŠ¶æ€</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Contextstate.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> state<span class="token punctuation">,</span> action <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">A</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">B</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">B</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">C</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">C</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Contextstate.Provider</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//å®šä¹‰å­ç»„ä»¶A</span>
<span class="token comment">//Aç»„ä»¶æ§åˆ¶BCç»„ä»¶çš„çŠ¶æ€</span>
<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//é€šè¿‡ç»“æ„æ–¹æ³•,è·å¾—çˆ¶ç»„ä»¶ç”¨useContextä¼ é€’çš„æ–¹æ³•action</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> action <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>Contextstate<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//å®šä¹‰åŠ¨ä½œæ ‡è®°</span>
        <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;child2add&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜child2çš„å€¼</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;child3add&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜child3çš„å€¼</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//å®šä¹‰å­ç»„ä»¶B</span>
<span class="token keyword">const</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">//è·å¾—çˆ¶ç»„ä»¶ç”¨useContextä¼ é€’çš„çŠ¶æ€state</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>Contextstate<span class="token punctuation">)</span>
	<span class="token comment">//ä½¿ç”¨useMemoè§£å†³æ€§èƒ½ä¼˜åŒ–é—®é¢˜!!!å‡å°‘ä¸å¿…è¦çš„reducer</span>
	<span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨B&#39;</span><span class="token punctuation">)</span>
	  <span class="token keyword">return</span> <span class="token punctuation">(</span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	      Child2---</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count1<span class="token punctuation">}</span><span class="token plain-text">
	    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	  <span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>count1<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//å®šä¹‰å­ç»„ä»¶C</span>
<span class="token keyword">const</span> <span class="token function-variable function">C</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//åŒä¸Š</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>Contextstate<span class="token punctuation">)</span>
	<span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è°ƒç”¨C&#39;</span><span class="token punctuation">)</span>
	  <span class="token keyword">return</span> <span class="token punctuation">(</span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
	      Child3---</span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count2<span class="token punctuation">}</span><span class="token plain-text">
	    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	  <span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>state<span class="token punctuation">.</span>count2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="useimperativehandle-ä¸-forwardref" tabindex="-1"><a class="header-anchor" href="#useimperativehandle-ä¸-forwardref" aria-hidden="true">#</a> useImperativeHandle ä¸ forwardRef</h2><blockquote><p>è¯­æ³• useImperativeHandle(ref, createHandle, [deps]) -- å®˜æ–¹è¯´æ˜</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚
åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚
useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">//çˆ¶ç»„ä»¶</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ChildComponent <span class="token keyword">from</span> <span class="token string">&#39;./components/Child&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> childRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">callChild</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> getInfo <span class="token punctuation">}</span> <span class="token operator">=</span> childRef<span class="token punctuation">.</span>current <span class="token keyword">as</span> <span class="token builtin">any</span>
    <span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>childRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildComponent</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>childRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildComponent</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>callChild<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æŒ‰é’®</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token comment">//å­ç»„ä»¶</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useImperativeHandle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;infoÂ·Â·Â·&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å­ç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/dashboard/projects/edit/main/docs/zh/react/Hookså‡½æ•°ç»„ä»¶.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: wcb_houhuiyouqi@126.com">wangchenbing</span>,<!--]--><!--[--><span class="contributor" title="email: wcb_houhuiyouqi@126.com">ç‹æ™¨å†°</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/My_blogs/zh/react/class%E7%B1%BB%E7%BB%84%E4%BB%B6.html" class="nav-link prev" aria-label="classç±»ç»„ä»¶"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->classç±»ç»„ä»¶</div></a><a href="/My_blogs/zh/react/%E5%8A%9F%E8%83%BD%E7%BB%84%E4%BB%B6.html" class="nav-link next" aria-label="åŠŸèƒ½ç»„ä»¶"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">åŠŸèƒ½ç»„ä»¶<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><!----></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/My_blogs/assets/app.8225ebca.js" defer></script>
  </body>
</html>
